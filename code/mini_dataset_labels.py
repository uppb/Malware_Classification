import pandas as pd
import os
import settings
import numpy as np

parameters = settings.get_parameters()
path = parameters["dataset_path"]
newfilelocation = parameters["truncated_label_file"]


if(os.path.exists(newfilelocation)):
    print("file already exists")
    print("rewriting file...")

n_to_keep = 15

labelfile = path + "trainLabels.csv"
labels = pd.read_csv(labelfile)
label_list = np.asarray(labels.values.tolist())
newlist = np.empty((n_to_keep,2))


#Select 15 files from each of the 9 categories

for i in range(9):
    temp = label_list[[j[1]==str(i+1) for j in label_list]]
    temp = temp[:n_to_keep]
    newlist = np.append(newlist,temp,axis=0)
newlist = newlist[15:]
new_data = pd.DataFrame({"Id": newlist[:,0], "Class": newlist[:,1]})
new_data.to_csv(newfilelocation,index=False)



